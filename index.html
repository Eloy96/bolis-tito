<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¬°Bolis Artesanales - La Alegr√≠a Refrescante!</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Swiper JS (para carrusel de rese√±as) -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

    <script>
      // Configuramos Tailwind para usar Quicksand como fuente principal
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['Quicksand', 'sans-serif'],
            },
            keyframes: {
              bounceIn: {
                '0%, 20%, 40%, 60%, 80%, 100%': { transform: 'translateY(0)' },
                '50%': { transform: 'translateY(-10px)' },
              },
              fadeInUp: {
                '0%': { opacity: 0, transform: 'translateY(20px)' },
                '100%': { opacity: 1, transform: 'translateY(0)' },
              },
              /* Animaci√≥n de flotaci√≥n suave */
              'float-light': {
                '0%, 100%': { transform: 'translateY(0px)' }, 
                '50%': { transform: 'translateY(-8px)' },
              },
              /* Animaci√≥n para el gradiente del t√≠tulo */
              'text-gradient-anim': {
                '0%': { 'background-position': '0% 50%' },
                '50%': { 'background-position': '100% 50%' },
                '100%': { 'background-position': '0% 50%' },
              }
            },
            animation: {
              'bounce-in': 'bounceIn 1s ease-out infinite',
              'fade-in-up': 'fadeInUp 0.8s ease-out forwards',
              'float-light': 'float-light 4s ease-in-out infinite',
              /* Animaci√≥n para el gradiente del t√≠tulo */
              'text-gradient-anim': 'text-gradient-anim 4s ease-in-out infinite',
            }
          }
        }
      }
    </script>
    <style>
      body {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        background: linear-gradient(to bottom right, #FFC107, #FF8A65, #FF5722); /* Degradado m√°s alegre */
        background-attachment: fixed; /* Para que el degradado se mantenga al hacer scroll */
        overflow-x: hidden; /* ¬°Esto elimina el scroll horizontal! */
      }
      
      /* Keyframes para la animaci√≥n del t√≠tulo */
      @keyframes text-gradient-anim {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      /* Clase para el gradiente animado del t√≠tulo */
      .text-gradient-animated {
        background-image: linear-gradient(to right, #ffffff 20%, #fde047 50%, #ffffff 80%);
        background-size: 200% auto;
        color: transparent;
        background-clip: text;
        -webkit-background-clip: text;
      }

      .card-icon {
        /* Usamos 'contain' para que la imagen completa quepa sin cortarse */
        width: 100%;
        height: 100%;
        object-fit: contain; /* Esto asegura que la imagen se escala para caber completamente */
        transition: transform 0.3s ease-in-out;
        padding: 5px; /* Peque√±o padding para que no se pegue al borde del c√≠rculo si es muy ancha */
      }
      
      .card-product:hover .card-icon {
        transform: scale(1.05) rotate(0deg); 
      }
      .card-product:hover .card-icon-container {
         box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); /* group-hover:shadow-xl */
      }
      .card-product {
        animation: fadeInUp 0.8s ease-out forwards;
        opacity: 0; /* Empieza oculto para la animaci√≥n */
      }
      /* Animaci√≥n de retraso para las tarjetas */
      .card-product:nth-child(1) { animation-delay: 0.1s; }
      .card-product:nth-child(2) { animation-delay: 0.2s; }
      .card-product:nth-child(3) { animation-delay: 0.3s; }
      .card-product:nth-child(4) { animation-delay: 0.4s; }
      .card-product:nth-child(5) { animation-delay: 0.5s; }

      /* --- Estilos para el formulario y rese√±as --- */
      .form-label {
        font-weight: 700;
        color: #374151; /* text-gray-700 */
        margin-bottom: 0.5rem; /* mb-2 */
        display: block;
      }
      .form-input, .form-select, .form-textarea {
        width: 100%;
        padding: 0.75rem; /* p-3 */
        border: 1px solid #D1D5DB; /* border-gray-300 */
        border-radius: 0.75rem; /* rounded-xl */
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
        transition: border-color 0.2s, box-shadow 0.2s;
      }
      .form-input:focus, .form-select:focus, .form-textarea:focus {
        outline: none;
        border-color: #F97316; /* border-orange-500 */
        box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.3); /* ring-orange-500 */
      }
      /* Estilos para el Rating de Estrellas */
      .star-rating {
        display: flex;
        flex-direction: row-reverse;
        justify-content: center;
        gap: 0.25rem; /* gap-1 */
      }
      .star-rating input[type="radio"] {
        display: none;
      }
      .star-rating label {
        font-size: 2.25rem; /* text-4xl */
        color: #D1D5DB; /* text-gray-300 */
        cursor: pointer;
        transition: color 0.2s;
      }
      .star-rating input[type="radio"]:checked ~ label {
        color: #FBBF24; /* text-amber-400 */
      }
      .star-rating label:hover,
      .star-rating label:hover ~ label {
        color: #FBBF24; /* text-amber-400 */
      }
      /* Mensaje de √©xito/error (no usamos alert) */
      .form-message {
        display: none;
        padding: 1rem;
        margin-top: 1rem;
        border-radius: 0.75rem;
        font-weight: 600;
      }
      .form-message.success {
        display: block;
        background-color: #D1FAE5; /* bg-green-100 */
        color: #065F46; /* text-green-800 */
      }
      .form-message.error {
        display: block;
        background-color: #FEE2E2; /* bg-red-100 */
        color: #991B1B; /* text-red-800 */
      }

      /* --- CAMBIOS EN EL CARRUSEL --- */
      .swiper-container {
        width: 100%;
        padding-bottom: 50px !important; /* M√°s espacio para puntos */
        touch-action: pan-y; /* Previene el 'swipe' de navegaci√≥n del navegador en m√≥viles */
        overflow: hidden !important; /* Previene que se vean slides cortados */
      }
      .swiper-slide {
        box-sizing: border-box; /* Asegura que el padding no rompa el dise√±o */
      }
      
      .swiper-pagination-bullet-active {
        background-color: #F97316 !important; /* Color naranja para el punto activo */
      }
      /* Estilos para las flechas de navegaci√≥n */
      .swiper-button-next,
      .swiper-button-prev {
        color: #FFFFFF !important; /* Color blanco */
        background-color: rgba(0, 0, 0, 0.2); /* Fondo semitransparente */
        width: 44px !important;
        height: 44px !important;
        border-radius: 9999px; /* C√≠rculo */
        transition: background-color 0.2s;
      }
      .swiper-button-next:hover,
      .swiper-button-prev:hover {
        background-color: rgba(0, 0, 0, 0.4); /* M√°s oscuro al pasar el mouse */
      }
      .swiper-button-next:after,
      .swiper-button-prev:after {
        font-size: 20px !important; /* Tama√±o del icono de flecha */
        font-weight: 900 !important;
      }

      /* Regla para evitar el scroll del body cuando el modal est√° abierto */
      body.modal-open {
        overflow: hidden;
      }
      /* Aseguramos que el modal en s√≠ pueda scrollear internamente */
      #cart-modal {
        overflow-y: auto;
      }
      
      /* Estilos para el mensaje "Toast" de √©xito */
      #global-toast {
        position: fixed;
        top: 1rem;
        left: 50%;
        transform: translate(-50%, -30px);
        opacity: 0;
        transition: all 0.3s ease-in-out;
        z-index: 100;
      }
      #global-toast.show {
        transform: translate(-50%, 0);
        opacity: 1;
      }
    </style>
</head>
<body class="font-sans">

    <!-- NUEVO: Banner de Promoci√≥n -->
    <div class="bg-gradient-to-r from-green-500 to-emerald-600 text-white text-center p-3 font-bold shadow-lg text-sm sm:text-base">
      ¬°PROMO! üéÅ En la compra de 2 bolis o m√°s, ¬°ll√©vate 1 de Tamarindo GRATIS!
    </div>

    <!-- NUEVO: Contenedor del Mensaje "Toast" -->
    <div id="global-toast" class="hidden bg-green-500 text-white py-3 px-6 rounded-xl shadow-lg font-semibold">
      <!-- El mensaje se insertar√° aqu√≠ con JS -->
    </div>
    
    <!-- Contenedor Principal -->
    <div class="container mx-auto px-4 py-12 md:py-20 relative"> <!-- A√±adido relative para el icono de carrito -->

        <!-- Icono de Carrito -->
        <div id="cart-icon" class="fixed top-16 right-4 z-40 cursor-pointer p-3 bg-white rounded-full shadow-lg hover:bg-gray-100 transition">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-orange-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
            </svg>
            <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-6 w-6 flex items-center justify-center">0</span>
        </div>

        
        <!-- Encabezado -->
        <header class="text-center mb-16 md:mb-24">
            <!-- T√≠tulo sin Emoji -->
            <!-- T√≠tulo m√°s peque√±o en m√≥vil (text-4xl) -->
            <h1 class="text-4xl md:text-7xl font-extrabold mb-4 leading-tight text-gradient-animated animate-text-gradient-anim">
                ¬°Bolis Artesanales! <br> El sabor de la alegr√≠a
            </h1>
            <p class="text-xl md:text-3xl text-yellow-100 font-medium drop-shadow-md">
                Refresca tu d√≠a con nuestros deliciosos y cremosos bolis.
            </p>
            <!-- Bot√≥n "¬°Quiero uno ya!" ELIMINADO -->
        </header>

        
        <!-- Secci√≥n de Productos -->
        <!-- 'grid-cols-2' (para m√≥vil), 'lg:grid-cols-3' (para desktop) -->
        <!-- Ajustado gap-x y pt para las nuevas tarjetas cuadradas -->
        <main class="grid grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-8 pt-8 max-w-7xl mx-auto">

            
            <!-- 1. Tamarindo con Lim√≥n -->
            <div class="card-product">
              <!-- Padding normal, quitado pt-16 -->
              <div class="bg-white rounded-3xl shadow-2xl p-4 text-center relative h-full flex flex-col transform hover:scale-105 transition-transform duration-300 ease-in-out group">
                
                <!-- Contenedor de imagen CUADRADO, DENTRO del flujo -->
                <div class="bg-orange-200 w-full aspect-square rounded-xl shadow-lg border-6 border-white flex items-center justify-center overflow-hidden mb-4">
                  <img src="imagenes/bolis-tamarindo-con-limon.png" alt="Boli de Tamarindo con Lim√≥n" class="card-icon">
                </div>
                
                <!-- Contenido -->
                <div class="flex-grow">
                  <!-- T√≠tulo sin padding-top extra -->
                  <h3 class="text-2xl font-bold text-gray-800 mb-2">Tamarindo con Lim√≥n</h3>
                  <!-- Descripci√≥n m√°s peque√±a (text-sm) -->
                  <p class="text-gray-600 text-sm mb-4">
                    Ingredientes: Pulpa de tamarindo 100% natural, jugo de lim√≥n fresco y un toque de sal.
                  </p>
                </div>
                
                <!-- Precio y Bot√≥n -->
                <div class="mt-4 flex flex-col items-center">
                  <!-- Precio m√°s peque√±o (text-4xl) -->
                  <span class="text-4xl font-extrabold text-orange-600 block mb-1">$12</span>
                  <span class="text-sm font-medium text-gray-500 block mb-3">133 ml</span>
                  <!-- Selector de cantidad y bot√≥n "Agregar" -->
                  <div class="flex items-center gap-2 mt-4">
                    <input type="number" class="product-quantity w-16 text-center form-input py-2" value="1" min="1">
                    <button class="add-to-cart-btn bg-gradient-to-r from-orange-500 to-amber-500 text-white font-bold py-2 px-3 rounded-full shadow-md hover:shadow-lg transform hover:scale-105 transition duration-300 ease-in-out text-sm" data-sabor="Tamarindo con Lim√≥n" data-precio="12">
                      Agregar
                    </button>
                  </div>
                  <span class="add-to-cart-message text-green-600 h-4 mt-1 text-xs font-medium"></span>
                </div>
              </div>
            </div>

            
            <!-- 2. Mazap√°n -->
            <div class="card-product">
              <!-- Padding normal, quitado pt-16 -->
              <div class="bg-white rounded-3xl shadow-2xl p-4 text-center relative h-full flex flex-col transform hover:scale-105 transition-transform duration-300 ease-in-out group">
                
                <!-- Contenedor de imagen CUADRADO, DENTRO del flujo -->
                <div class="bg-yellow-100 w-full aspect-square rounded-xl shadow-lg border-6 border-white flex items-center justify-center overflow-hidden mb-4">
                  <img src="imagenes/bolis-mazapan.png" alt="Boli de Mazap√°n" class="card-icon">
                </div>
                
                <!-- Contenido -->
                <div class="flex-grow">
                  <!-- T√≠tulo sin padding-top extra -->
                  <h3 class="text-2xl font-bold text-gray-800 mb-2">Mazap√°n</h3>
                  <!-- Descripci√≥n m√°s peque√±a (text-sm) -->
                  <p class="text-gray-600 text-sm mb-4">
                    Ingredientes: Mazap√°n de cacahuate original, leche cremosa y un toque de vainilla.
                  </p>
                </div>
                
                <!-- Precio y Bot√≥n -->
                <div class="mt-4 flex flex-col items-center">
                  <!-- Precio m√°s peque√±o (text-4xl) -->
                  <span class="text-4xl font-extrabold text-orange-600 block mb-1">$12</span>
                  <span class="text-sm font-medium text-gray-500 block mb-3">133 ml</span>
                  <!-- Selector de cantidad y bot√≥n "Agregar" -->
                  <div class="flex items-center gap-2 mt-4">
                    <input type="number" class="product-quantity w-16 text-center form-input py-2" value="1" min="1">
                    <button class="add-to-cart-btn bg-gradient-to-r from-orange-500 to-amber-500 text-white font-bold py-2 px-3 rounded-full shadow-md hover:shadow-lg transform hover:scale-105 transition duration-300 ease-in-out text-sm" data-sabor="Mazap√°n" data-precio="12">
                      Agregar
                    </button>
                  </div>
                  <span class="add-to-cart-message text-green-600 h-4 mt-1 text-xs font-medium"></span>
                </div>
              </div>
            </div>

            
            <!-- 3. Horchata -->
            <div class="card-product">
              <!-- Padding normal, quitado pt-16 -->
              <div class="bg-white rounded-3xl shadow-2xl p-4 text-center relative h-full flex flex-col transform hover:scale-105 transition-transform duration-300 ease-in-out group">
                
                <!-- Contenedor de imagen CUADRADO, DENTRO del flujo -->
                <div class="bg-stone-100 w-full aspect-square rounded-xl shadow-lg border-6 border-white flex items-center justify-center overflow-hidden mb-4">
                  <img src="imagenes/bolis-horchata.jpg" alt="Boli de Horchata" class="card-icon">
                </div>
                
                <!-- Contenido -->
                <div class="flex-grow">
                  <!-- T√≠tulo sin padding-top extra -->
                  <h3 class="text-2xl font-bold text-gray-800 mb-2">Horchata</h3>
                  <!-- Descripci√≥n m√°s peque√±a (text-sm) -->
                  <p class="text-gray-600 text-sm mb-4">
                    Ingredientes: Agua de arroz tradicional, canela molida, leche y un toque de az√∫car.
                  </p>
                </div>
                
                <!-- Precio y Bot√≥n -->
                <div class="mt-4 flex flex-col items-center">
                  <!-- Precio m√°s peque√±o (text-4xl) -->
                  <span class="text-4xl font-extrabold text-orange-600 block mb-1">$12</span>
                  <span class="text-sm font-medium text-gray-500 block mb-3">133 ml</span>
                  <!-- Selector de cantidad y bot√≥n "Agregar" -->
                  <div class="flex items-center gap-2 mt-4">
                    <input type="number" class="product-quantity w-16 text-center form-input py-2" value="1" min="1">
                    <button class="add-to-cart-btn bg-gradient-to-r from-orange-500 to-amber-500 text-white font-bold py-2 px-3 rounded-full shadow-md hover:shadow-lg transform hover:scale-105 transition duration-300 ease-in-out text-sm" data-sabor="Horchata" data-precio="12">
                      Agregar
                    </button>
                  </div>
                  <span class="add-to-cart-message text-green-600 h-4 mt-1 text-xs font-medium"></span>
                </div>
              </div>
            </div>

            
            <!-- 4. Fresas con Crema -->
            <div class="card-product">
              <!-- Padding normal, quitado pt-16 -->
              <div class="bg-white rounded-3xl shadow-2xl p-4 text-center relative h-full flex flex-col transform hover:scale-105 transition-transform duration-300 ease-in-out group">
                
                <!-- Contenedor de imagen CUADRADO, DENTRO del flujo -->
                <div class="bg-pink-200 w-full aspect-square rounded-xl shadow-lg border-6 border-white flex items-center justify-center overflow-hidden mb-4">
                  <img src="imagenes/bolis-fresas-con-crema.png" alt="Boli de Fresas con Crema" class="card-icon">
                </div>
                
                <!-- Contenido -->
                <div class="flex-grow">
                  <!-- T√≠tulo sin padding-top extra -->
                  <h3 class="text-2xl font-bold text-gray-800 mb-2">Fresas con Crema</h3>
                  <!-- Descripci√≥n m√°s peque√±a (text-sm) -->
                  <p class="text-gray-600 text-sm mb-4">
                    Ingredientes: Fresas frescas de temporada, crema dulce, leche evaporada y un toque de lechera.
                  </p>
                </div>
                
                <!-- Precio y Bot√≥n -->
                <div class="mt-4 flex flex-col items-center">
                  <!-- Precio m√°s peque√±o (text-4xl) -->
                  <span class="text-4xl font-extrabold text-orange-600 block mb-1">$12</span>
                  <span class="text-sm font-medium text-gray-500 block mb-3">133 ml</span>
                  <!-- Selector de cantidad y bot√≥n "Agregar" -->
                  <div class="flex items-center gap-2 mt-4">
                    <input type="number" class="product-quantity w-16 text-center form-input py-2" value="1" min="1">
                    <button class="add-to-cart-btn bg-gradient-to-r from-orange-500 to-amber-500 text-white font-bold py-2 px-3 rounded-full shadow-md hover:shadow-lg transform hover:scale-105 transition duration-300 ease-in-out text-sm" data-sabor="Fresas con Crema" data-precio="12">
                      Agregar
                    </button>
                  </div>
                  <span class="add-to-cart-message text-green-600 h-4 mt-1 text-xs font-medium"></span>
                </div>
              </div>
            </div>

            
            <!-- 5. Oreo -->
            <div class="card-product">
              <!-- Padding normal, quitado pt-16 -->
              <div class="bg-white rounded-3xl shadow-2xl p-4 text-center relative h-full flex flex-col transform hover:scale-105 transition-transform duration-300 ease-in-out group">
                
                <!-- Contenedor de imagen CUADRADO, DENTRO del flujo -->
                <div class="bg-gray-700 w-full aspect-square rounded-xl shadow-lg border-6 border-white flex items-center justify-center overflow-hidden mb-4">
                  <img src="imagenes/bolis-de-oreo.png" alt="Boli de Oreo" class="card-icon">
                </div>
                
                <!-- Contenido -->
                <div class="flex-grow">
                  <!-- T√≠tulo sin padding-top extra -->
                  <h3 class="text-2xl font-bold text-gray-800 mb-2">Oreo</h3>
                  <!-- Descripci√≥n m√°s peque√±a (text-sm) -->
                  <p class="text-gray-600 text-sm mb-4">
                    Ingredientes: Galleta Oreo triturada, leche entera, crema dulce y un toque de vainilla.
                  </p>
                </div>
                
                <!-- Precio y Bot√≥n -->
                <div class="mt-4 flex flex-col items-center">
                  <!-- Precio m√°s peque√±o (text-4xl) -->
                  <span class="text-4xl font-extrabold text-orange-600 block mb-1">$12</span>
                  <span class="text-sm font-medium text-gray-500 block mb-3">133 ml</span>
                  <!-- Selector de cantidad y bot√≥n "Agregar" -->
                  <div class="flex items-center gap-2 mt-4">
                    <input type="number" class="product-quantity w-16 text-center form-input py-2" value="1" min="1">
                    <button class="add-to-cart-btn bg-gradient-to-r from-orange-500 to-amber-500 text-white font-bold py-2 px-3 rounded-full shadow-md hover:shadow-lg transform hover:scale-105 transition duration-300 ease-in-out text-sm" data-sabor="Oreo" data-precio="12">
                      Agregar
                    </button>
                  </div>
                  <span class="add-to-cart-message text-green-600 h-4 mt-1 text-xs font-medium"></span>
                </div>
              </div>
            </div>
            
            <!-- A√±adido un item fantasma para alinear la √∫ltima fila en 'lg' (3 columnas) -->
            <div class="hidden lg:block"></div>

        </main>

        
        <!-- Secci√≥n de Rese√±as -->
        <section id="rese√±as" class="mt-24 pt-16">
          <div class="w-full max-w-3xl mx-auto">
            <h2 class="text-4xl font-extrabold text-center text-white mb-8 drop-shadow-lg">¬°Lo que dicen nuestros clientes!</h2>

            
            <!-- Carrusel de Rese√±as -->
            <!-- A√±adido 'relative' para posicionar flechas -->
            <div class="relative">
              <div class="swiper-container mySwiper mb-12">
                <div class="swiper-wrapper">
                  
                  
                  <!-- Rese√±a Est√°tica 1 -->
                  <div class="swiper-slide bg-white p-6 rounded-2xl shadow-xl">
                    <div class="flex justify-between items-center mb-2">
                      <span class="font-bold text-lg text-gray-800">Laura G.</span>
                      <span class="text-amber-400 text-xl">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                    </div>
                    <p class="text-gray-600">"¬°El boli de Oreo es espectacular! S√∫per cremoso y con muchos trocitos de galleta. 100% recomendado."</p>
                  </div>
                  
                  
                  <!-- Rese√±a Est√°tica 2 -->
                  <div class="swiper-slide bg-white p-6 rounded-2xl shadow-xl">
                    <div class="flex justify-between items-center mb-2">
                      <span class="font-bold text-lg text-gray-800">Miguel R.</span>
                      <span class="text-amber-400 text-xl">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</span>
                    </div>
                    <p class="text-gray-600">"Muy rico el de Fresas con Crema, se nota que la fresa es natural. El de horchata tambi√©n muy bueno. Me gustar√≠a que tuvieran de lim√≥n."</p>
                  </div>
                  
                  
                  <!-- Rese√±a Est√°tica 3 -->
                  <div class="swiper-slide bg-white p-6 rounded-2xl shadow-xl">
                    <div class="flex justify-between items-center mb-2">
                      <span class="font-bold text-lg text-gray-800">Sof√≠a M.</span>
                      <span class="text-amber-400 text-xl">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                    </div>
                    <p class="text-gray-600">"Excelente servicio, me contactaron r√°pido por WhatsApp y la entrega fue s√∫per puntual en el kiosko. ¬°Gracias!"</p>
                  </div>

                </div>
                
                <!-- Paginaci√≥n del Carrusel -->
                <div class="swiper-pagination"></div>
              </div>

              <!-- Flechas de Navegaci√≥n A√±adidas -->
              <div class="swiper-button-prev -left-2"></div>
              <div class="swiper-button-next -right-2"></div>
            </div>


            
            <!-- Formulario para dejar Rese√±a -->
            <div class="bg-white p-6 md:p-10 rounded-3xl shadow-2xl animate-fade-in-up" style="animation-delay: 0.9s;">
              <h3 class="text-3xl font-bold text-center text-gray-800 mb-6">¬°Deja tu rese√±a!</h3>
              <form id="reviewForm">
                <div class="mb-4">
                  <!-- Texto m√°s claro para las estrellas -->
                  <label class="form-label text-center">¬°Tu Calificaci√≥n! (Elige las estrellas)</label>
                  <div class="star-rating">
                    <input type="radio" id="star5" name="rating" value="5" required><label for="star5" title="5 estrellas">‚òÖ</label>
                    <input type="radio" id="star4" name="rating" value="4"><label for="star4" title="4 estrellas">‚òÖ</label>
                    <input type="radio" id="star3" name="rating" value="3"><label for="star3" title="3 estrellas">‚òÖ</label>
                    <input type="radio" id="star2" name="rating" value="2"><label for="star2" title="2 estrellas">‚òÖ</label>
                    <input type="radio" id="star1" name="rating" value="1"><label for="star1" title="1 estrella">‚òÖ</label>
                  </div>
                </div>
                <div class="mb-4">
                  <label for="review-nombre" class="form-label">Tu Nombre</label>
                  <input type="text" id="review-nombre" name="review-nombre" class="form-input" required>
                </div>
                <div class="mb-6">
                  <label for="review-comentario" class="form-label">Tu Comentario</label>
                  <textarea id="review-comentario" name="review-comentario" rows="3" class="form-textarea" required placeholder="Cu√©ntanos tu experiencia..."></textarea>
                </div>
                <button type="submit" id="submit-review-btn" class="w-full bg-gradient-to-r from-orange-500 to-amber-500 text-white font-bold text-lg py-4 px-6 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition duration-300 ease-in-out">
                  Enviar Rese√±a
                </button>
                
                <!-- Mensaje de Estado de la Rese√±a -->
                <div id="review-form-message" class="form-message"></div>
              </form>
            </div>
          </div>
        </section>

        
        <!-- Footer -->
        <footer class="text-center p-8 text-yellow-50 mt-16 drop-shadow-md">
            <!-- A√±adida la marca "Bolis Tito" -->
            <p class="font-extrabold text-2xl mb-2">Bolis Tito</p>
            <p class="font-bold text-lg">Bolis Artesanales "La Alegr√≠a Refrescante" &copy; 2025</p>
            <p>Hechos con ‚ù§Ô∏è y mucho sabor en M√©xico</p>
        </footer>

    </div>

    <!-- Modal del Carrito de Compras -->
    <div id="cart-modal" class="fixed inset-0 bg-black bg-opacity-75 z-50 hidden flex items-center justify-center p-4">
        <!-- Modal m√°s responsivo en altura y ancho -->
        <div id="cart-modal-content" class="bg-white w-full max-w-lg rounded-2xl shadow-xl flex flex-col max-h-[90vh]">
            
            <!-- Encabezado del Modal -->
            <div class="flex justify-between items-center p-5 border-b">
                <h2 class="text-3xl font-extrabold text-gray-800">Tu Carrito</h2>
                <button id="close-cart-btn" class="text-gray-400 hover:text-gray-700 text-4xl font-light">&times;</button>
            </div>
            
            <!-- Contenedor de SCROLL √öNICO -->
            <div class="overflow-y-auto">

                <!-- Contenido del Carrito (Items) -->
                <div id="cart-items-container" class="p-6 space-y-4">
                    <!-- Los items del carrito se agregar√°n aqu√≠ con JS -->
                    <!-- <p id="cart-empty-message" class="text-gray-500 text-center">Tu carrito est√° vac√≠o.</p> -->
                </div>
                
                <!-- Total del Carrito -->
                <div class="p-6 border-t text-right">
                    <span class="text-3xl font-extrabold text-gray-800">Total: <span id="cart-total" class="text-orange-600">$0.00</span></span>
                </div>
                
                <!-- Formulario de Checkout -->
                <form id="checkoutForm" class="p-6 space-y-4 border-t">
                    <h3 class="text-2xl font-bold text-gray-700">Completa tu Pedido</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="nombre" class="form-label">Nombre Completo</label>
                            <input type="text" id="nombre" name="nombre" class="form-input" required>
                        </div>
                        <div>
                            <label for="telefono" class="form-label">Tel√©fono / WhatsApp</label>
                            <input type="tel" id="telefono" name="telefono" class="form-input" required>
                        </div>
                    </div>
                    <div class="mb-2">
                        <label for="lugar-entrega" class="form-label">Lugar de Entrega</label>
                        <select id="lugar-entrega" name="lugar-entrega" class="form-select" required>
                            <option value="">Selecciona un punto de entrega...</option>
                            <option value="Huixquilucan Centro (Kiosko)">Huixquilucan Centro (Kiosko)</option>
                            <option value="El Mirador Magdalena Chichicaspa (Parada de autobuses)">El Mirador Magdalena Chichicaspa (Parada)</option>
                            <option value="Paraje Las M√°quinas Magdalena Chichicaspa">Paraje Las M√°quinas Magdalena Chichicaspa</option>
                        </select>
                        <p class="text-sm text-gray-500 mt-2">
                            <strong>Horario de Entrega:</strong> S√°bados, acordando la hora contigo.
                        </p>
                    </div>
                    <div class="mb-2">
                        <label for="comentarios" class="form-label">Comentarios Adicionales</label>
                        <textarea id="comentarios" name="comentarios" rows="3" class="form-textarea" placeholder="¬øAlguna indicaci√≥n especial?"></textarea>
                    </div>

                    <!-- Bot√≥n de Confirmar Pedido (restaurado) -->
                    <button type="submit" id="submit-order-btn" class="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold text-lg py-4 px-6 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition duration-300 ease-in-out">
                        Confirmar Pedido
                    </button>
                    
                    <div id="cart-form-message" class="form-message"></div>
                </form>

            </div> <!-- Fin del contenedor de SCROLL √öNICO -->

        </div>
    </div>
    
    <!-- JavaScript -->
    <script>
      // ---- URL de Google Apps Script ----
      // IMPORTANTE: Si actualizaste tu script, pega la NUEVA URL aqu√≠
      const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbx88q2qxy_szNMh4GOz0gT-Bpp7Fz6GOoMo5b2uvwKRoopMARciMQ8JsD-R-6kuldE/exec';
      // --------------------

      // Estado del Carrito
      let cart = [];
      const PROMO_ITEM_NAME = 'Tamarindo (Promo)';
      const PROMO_ITEM_PRICE = 0;

      document.addEventListener('DOMContentLoaded', () => {
        
        // --- Selector para el Toast ---
        const globalToast = document.getElementById('global-toast');

        // --- Selectores de Rese√±as ---
        const reviewForm = document.getElementById('reviewForm');
        const reviewMessage = document.getElementById('review-form-message');
        const submitReviewBtn = document.getElementById('submit-review-btn');
        
        // --- Configuraci√≥n del Carrusel de Rese√±as ---
        var swiper = new Swiper(".mySwiper", {
          slidesPerView: 1, 
          spaceBetween: 30, 
          effect: 'fade', 
          fadeEffect: {
            crossFade: true
          },
          loop: true, 
          centeredSlides: true, 
          autoplay: {
            delay: 3000, 
            disableOnInteraction: false, 
          },
          pagination: {
            el: ".swiper-pagination",
            clickable: true, 
          },
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
        });

        // --- Selectores del Carrito ---
        const cartIcon = document.getElementById('cart-icon');
        const cartModal = document.getElementById('cart-modal');
        const cartModalContent = document.getElementById('cart-modal-content');
        const closeCartBtn = document.getElementById('close-cart-btn');
        const cartItemsContainer = document.getElementById('cart-items-container');
        const cartTotalEl = document.getElementById('cart-total');
        const cartCountEl = document.getElementById('cart-count');
        const addToCartButtons = document.querySelectorAll('.add-to-cart-btn');
        const checkoutForm = document.getElementById('checkoutForm');
        const cartFormMessage = document.getElementById('cart-form-message');


        // --- Funci√≥n para abrir y cerrar el modal ---
        cartIcon.addEventListener('click', () => {
            updateCartUI(); 
            cartModal.classList.remove('hidden');
            document.body.classList.add('modal-open'); 
        });
        
        const closeModal = () => {
            cartModal.classList.add('hidden');
            document.body.classList.remove('modal-open'); 
        };
        closeCartBtn.addEventListener('click', closeModal);
        cartModal.addEventListener('click', (e) => {
            if (e.target === cartModal) {
                closeModal();
            }
        });

        // --- Funci√≥n principal para actualizar la UI del Carrito ---
        const updateCartUI = () => {
            
            // --- NUEVA L√ìGICA DE PROMOCI√ìN (MODIFICADA) ---
            // 1. Contar cu√°ntos bolis PAGADOS hay
            let totalPaidItems = 0;
            cart.forEach(item => {
                if (item.sabor !== PROMO_ITEM_NAME) { // No contamos el de promo
                    totalPaidItems += item.cantidad;
                }
            });

            // 2. Calcular cu√°ntos bolis de promo tocan (1 por cada 2 pagados)
            const promoItemsToGet = Math.floor(totalPaidItems / 2);

            // 3. Verificar si el item de promo ya existe
            const promoItem = cart.find(item => item.sabor === PROMO_ITEM_NAME);

            // 4. Aplicar/Quitar/Actualizar promoci√≥n
            if (promoItemsToGet > 0) {
                if (promoItem) {
                    // Si ya existe, solo actualizar la cantidad
                    promoItem.cantidad = promoItemsToGet; 
                } else {
                    // Si no existe, agregarlo con la cantidad correcta
                    cart.push({ sabor: PROMO_ITEM_NAME, cantidad: promoItemsToGet, precio: PROMO_ITEM_PRICE });
                }
            } else {
                // Si es 0, quitar la promo del carrito
                cart = cart.filter(item => item.sabor !== PROMO_ITEM_NAME);
            }
            // --- FIN L√ìGICA DE PROMOCI√ìN ---

            // Limpiar contenedor
            cartItemsContainer.innerHTML = '';
            
            let totalGeneral = 0;
            let totalItems = 0;

            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p class="text-gray-500 text-center">Tu carrito est√° vac√≠o.</p>';
            } else {
                cart.forEach(item => {
                    const subtotal = item.precio * item.cantidad;
                    totalGeneral += subtotal;
                    totalItems += item.cantidad;

                    // El item de promo no se puede modificar
                    const isPromoItem = item.sabor === PROMO_ITEM_NAME;

                    const itemHTML = `
                        <div class="flex items-center justify-between gap-2 sm:gap-4 border-b pb-4">
                            <div class="flex-grow">
                                <h4 class="font-bold text-lg ${isPromoItem ? 'text-green-600' : ''}">${item.sabor}</h4>
                                <!-- Input para modificar cantidad con botones + y - -->
                                <div class="flex items-center gap-2 mt-1">
                                    <label class="text-sm text-gray-600">Cant:</label>
                                    <div class="flex items-center border border-gray-300 rounded-lg">
                                        <!-- Deshabilitar botones si es promo -->
                                        <button type="button" class="cart-quantity-btn cart-quantity-minus p-2 text-lg font-bold text-orange-600 ${isPromoItem ? 'opacity-50 cursor-not-allowed' : ''}" data-sabor="${item.sabor}" data-change="-1" ${isPromoItem ? 'disabled' : ''}>-</button>
                                        <input type="number" class="w-12 text-center border-none focus:ring-0 py-1 text-sm bg-transparent" value="${item.cantidad}" min="1" data-sabor="${item.sabor}" readonly>
                                        <button type="button" class="cart-quantity-btn cart-quantity-plus p-2 text-lg font-bold text-orange-600 ${isPromoItem ? 'opacity-50 cursor-not-allowed' : ''}" data-sabor="${item.sabor}" data-change="1" ${isPromoItem ? 'disabled' : ''}>+</button>
                                    </div>
                                </div>
                            </div>
                            <div class="text-right flex-shrink-0">
                                <span class="font-bold text-lg block ${isPromoItem ? 'text-green-600' : ''}">$${subtotal.toFixed(2)}</span>
                                <!-- No se puede quitar la promo manualmente -->
                                ${!isPromoItem ? `<button class="remove-from-cart-btn text-red-500 text-sm hover:underline" data-sabor="${item.sabor}">Quitar</button>` : '<span class="text-green-600 text-sm">¬°Promo!</span>'}
                            </div>
                        </div>
                    `;
                    cartItemsContainer.innerHTML += itemHTML;
                });
            }

            // Actualizar totales
            cartTotalEl.textContent = `$${totalGeneral.toFixed(2)}`;
            cartCountEl.textContent = totalItems;
        };

        // --- Funci√≥n para agregar al carrito ---
        const addToCart = (sabor, cantidad, precio, btn) => {
            // No permitir agregar el item de promo manualmente
            if (sabor === PROMO_ITEM_NAME) return; 

            const existingItem = cart.find(item => item.sabor === sabor);

            if (existingItem) {
                existingItem.cantidad += cantidad;
            } else {
                cart.push({ sabor, cantidad, precio });
            }

            updateCartUI(); // La l√≥gica de la promo se correr√° aqu√≠

            // Mostrar mensaje de "¬°Agregado!"
            const messageEl = btn.closest('.card-product').querySelector('.add-to-cart-message');
            if(messageEl) {
                messageEl.textContent = '¬°Agregado!';
                setTimeout(() => {
                    messageEl.textContent = '';
                }, 2000); // Borra el mensaje despu√©s de 2 segundos
            }
        };

        // --- Asignar evento a botones "Agregar" ---
        addToCartButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                const card = btn.closest('.card-product');
                const sabor = btn.dataset.sabor;
                const precio = parseFloat(btn.dataset.precio);
                const cantidadInput = card.querySelector('.product-quantity');
                const cantidad = parseInt(cantidadInput.value, 10);

                if (cantidad > 0) {
                    addToCart(sabor, cantidad, precio, btn);
                    cantidadInput.value = '1'; // Resetea la cantidad
                }
            });
        });

        // --- Asignar evento para botones del carrito (delegaci√≥n) ---
        cartItemsContainer.addEventListener('click', (e) => {
            const target = e.target;
            
            // Bot√≥n "Quitar"
            if (target.classList.contains('remove-from-cart-btn')) {
                const sabor = target.dataset.sabor;
                // No permitir quitar la promo (aunque el bot√≥n no deber√≠a existir)
                if (sabor === PROMO_ITEM_NAME) return;
                
                cart = cart.filter(item => item.sabor !== sabor);
                updateCartUI();
            } 
            
            // Botones + y -
            else if (target.classList.contains('cart-quantity-btn')) {
                const sabor = target.dataset.sabor;
                // No permitir modificar la promo
                if (sabor === PROMO_ITEM_NAME) return;

                const change = parseInt(target.dataset.change, 10);
                const cartItem = cart.find(item => item.sabor === sabor);
                
                if (cartItem) {
                    let newCantidad = cartItem.cantidad + change;
                    if (newCantidad > 0) {
                        cartItem.cantidad = newCantidad;
                    } else {
                        // Si es 0 o menos, quitarlo
                        cart = cart.filter(item => item.sabor !== sabor);
                    }
                    updateCartUI();
                }
            }
        });

        // --- L√≥gica de env√≠o de formulario (checkoutForm) ---
        checkoutForm.addEventListener('submit', (e) => {
            e.preventDefault();

            if (cart.length === 0 || (cart.length === 1 && cart[0].sabor === PROMO_ITEM_NAME)) {
                cartFormMessage.textContent = 'Tu carrito est√° vac√≠o. Agrega productos para confirmar.';
                cartFormMessage.className = 'form-message error';
                return;
            }

            const submitBtn = checkoutForm.querySelector('#submit-order-btn');
            const btnOriginalText = submitBtn.textContent;
            submitBtn.disabled = true;
            submitBtn.textContent = 'Enviando...';
            cartFormMessage.className = 'form-message'; 

            // Convertir el carrito al formato JSON
            const pedidos = cart.map(item => ({ 
                sabor: item.sabor, 
                cantidad: item.cantidad,
                precio: item.precio 
            }));

            // Crear el objeto de datos
            const formData = {
              tipo: 'Pedido',
              nombre: checkoutForm.nombre.value,
              telefono: checkoutForm.telefono.value,
              pedido: JSON.stringify(pedidos),
              total: cartTotalEl.textContent, 
              lugarEntrega: checkoutForm['lugar-entrega'].value,
              comentarios: checkoutForm.comentarios.value
            };
            
            // Enviar a Google Apps Script
            fetch(SCRIPT_URL, {
              method: 'POST',
              mode: 'no-cors', 
              cache: 'no-cache',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify(formData)
            })
            .then(() => {
                checkoutForm.reset();
                cart = []; // Vac√≠a el carrito
                updateCartUI(); // Actualiza la UI (mostrar√° carrito vac√≠o)
                closeModal(); // Cierra el modal
                
                // Mostrar el nuevo "Toast" global
                showToast('¬°Gracias por tu pedido! Te contactaremos pronto.');
                
            })
            .catch(error => {
                cartFormMessage.textContent = 'Hubo un error al enviar tu pedido. Intenta de nuevo.';
                cartFormMessage.className = 'form-message error';
                console.error('Error:', error);
            })
            .finally(() => {
                submitBtn.disabled = false;
                submitBtn.textContent = btnOriginalText;
            });
        });

        // --- Funci√≥n para mostrar el Toast Global ---
        const showToast = (message) => {
          if (!globalToast) return;
          globalToast.textContent = message;
          globalToast.classList.remove('hidden', 'opacity-0');
          globalToast.classList.add('show');
          
          // Ocultar despu√©s de 3 segundos
          setTimeout(() => {
            globalToast.classList.remove('show');
            globalToast.classList.add('opacity-0');
            // A√±adir 'hidden' despu√©s de que termine la transici√≥n
            setTimeout(() => {
              globalToast.classList.add('hidden');
            }, 300); // 300ms = duration-300
          }, 3000);
        };

        // --- L√≥gica del Formulario de Rese√±as ---
        const agregarNuevaRese√±a = (nombre, rating, comentario) => {
          const estrellasNum = parseInt(rating, 10) || 0;
          let estrellasIconos = '';
          if (estrellasNum > 0) {
            estrellasIconos = '‚òÖ'.repeat(estrellasNum) + '‚òÜ'.repeat(5 - estrellasNum);
          }
          const safeNombre = nombre.replace(/</g, "&lt;").replace(/>/g, "&gt;");
          const safeComentario = comentario.replace(/</g, "&lt;").replace(/>/g, "&gt;");
          const nuevaRese√±aHTML = `
            <div class="swiper-slide bg-white p-6 rounded-2xl shadow-xl">
              <div class="flex justify-between items-center mb-2">
                <span class="font-bold text-lg text-gray-800">${safeNombre}</span>
                <span class="text-amber-400 text-xl">${estrellasIconos}</span>
              </div>
              <p class="text-gray-600">${safeComentario}</p>
            </div>
          `;
          if (swiper) {
            swiper.appendSlide(nuevaRese√±aHTML);
            swiper.update(); 
            swiper.slideTo(swiper.slides.length - 1); 
          }
        };

        if (reviewForm) {
          reviewForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const btnOriginalText = submitReviewBtn.textContent;
            submitReviewBtn.disabled = true;
            submitReviewBtn.textContent = 'Enviando...';
            reviewMessage.className = 'form-message'; 

            const rating = reviewForm.querySelector('input[name="rating"]:checked');
            const nombre = reviewForm['review-nombre'].value;
            const comentario = reviewForm['review-comentario'].value;
            const ratingValue = rating ? rating.value : '0';

            const formData = {
              tipo: 'Rese√±a',
              nombre: nombre,
              rating: ratingValue,
              comentario: comentario
            };

            fetch(SCRIPT_URL, {
              method: 'POST',
              mode: 'no-cors',
              cache: 'no-cache',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify(formData)
            })
            .then(() => {
                agregarNuevaRese√±a(nombre, ratingValue, comentario);
                reviewForm.reset();
                reviewMessage.textContent = '¬°Gracias por tu rese√±a!';
                reviewMessage.className = 'form-message success';
            })
            .catch(error => {
                reviewMessage.textContent = 'Hubo un error al enviar tu rese√±a. Intenta de nuevo.';
                reviewMessage.className = 'form-message error';
                console.error('Error:', error);
            })
            .finally(() => {
                submitReviewBtn.disabled = false;
                submitReviewBtn.textContent = btnOriginalText;
            });
          });
        }

      });
    </script>

</body>
</html>


