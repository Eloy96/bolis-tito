<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¡Bolis Artesanales - La Alegría Refrescante!</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Swiper JS (para carrusel de reseñas) -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

    <script>
      // Configuramos Tailwind para usar Quicksand como fuente principal
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['Quicksand', 'sans-serif'],
            },
            keyframes: {
              bounceIn: {
                '0%, 20%, 40%, 60%, 80%, 100%': { transform: 'translateY(0)' },
                '50%': { transform: 'translateY(-10px)' },
              },
              fadeInUp: {
                '0%': { opacity: 0, transform: 'translateY(20px)' },
                '100%': { opacity: 1, transform: 'translateY(0)' },
              },
              /* Animación de flotación suave */
              'float-light': {
                '0%, 100%': { transform: 'translateY(0px)' }, 
                '50%': { transform: 'translateY(-8px)' },
              },
              /* Animación para el gradiente del título */
              'text-gradient-anim': {
                '0%': { 'background-position': '0% 50%' },
                '50%': { 'background-position': '100% 50%' },
                '100%': { 'background-position': '0% 50%' },
              }
            },
            animation: {
              'bounce-in': 'bounceIn 1s ease-out infinite',
              'fade-in-up': 'fadeInUp 0.8s ease-out forwards',
              'float-light': 'float-light 4s ease-in-out infinite',
              /* Animación para el gradiente del título */
              'text-gradient-anim': 'text-gradient-anim 4s ease-in-out infinite',
            }
          }
        }
      }
    </script>
    <style>
      body {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        background: linear-gradient(to bottom right, #FFC107, #FF8A65, #FF5722); /* Degradado más alegre */
        background-attachment: fixed; /* Para que el degradado se mantenga al hacer scroll */
        overflow-x: hidden; /* ¡Esto elimina el scroll horizontal! */
      }
      
      /* Keyframes para la animación del título */
      @keyframes text-gradient-anim {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      /* Clase para el gradiente animado del título */
      .text-gradient-animated {
        background-image: linear-gradient(to right, #ffffff 20%, #fde047 50%, #ffffff 80%);
        background-size: 200% auto;
        color: transparent;
        background-clip: text;
        -webkit-background-clip: text;
      }

      .card-icon {
        /* Usamos 'contain' para que la imagen completa quepa sin cortarse */
        width: 100%;
        height: 100%;
        object-fit: contain; /* Esto asegura que la imagen se escala para caber completamente */
        transition: transform 0.3s ease-in-out;
        padding: 5px; /* Pequeño padding para que no se pegue al borde del círculo si es muy ancha */
      }
      .card-icon-container {
        /* Este es el contenedor circular */
        width: 144px; /* w-36 */
        height: 144px; /* h-36 */
        border-radius: 9999px; /* rounded-full */
        overflow: hidden; /* Recorta la imagen a la forma del círculo */
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-lg */
        border-width: 6px; /* border-6 */
        border-color: #FFFFFF; /* border-white */
        display: flex;
        align-items: center;
        justify-content: center;
        transition: box-shadow 0.3s duration;
        /* Centrado para la animación float */
        position: absolute;
        top: -4rem; /* -top-16 */
        left: 50%;
        transform: translateX(-50%); /* Centrado inicial */
      }
      .card-product:hover .card-icon {
        transform: scale(1.05) rotate(0deg); 
      }
      .card-product:hover .card-icon-container {
         box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); /* group-hover:shadow-xl */
      }
      .card-product {
        animation: fadeInUp 0.8s ease-out forwards;
        opacity: 0; /* Empieza oculto para la animación */
      }
      /* Animación de retraso para las tarjetas */
      .card-product:nth-child(1) { animation-delay: 0.1s; }
      .card-product:nth-child(2) { animation-delay: 0.2s; }
      .card-product:nth-child(3) { animation-delay: 0.3s; }
      .card-product:nth-child(4) { animation-delay: 0.4s; }
      .card-product:nth-child(5) { animation-delay: 0.5s; }

      /* --- Estilos para el formulario y reseñas --- */
      .form-label {
        font-weight: 700;
        color: #374151; /* text-gray-700 */
        margin-bottom: 0.5rem; /* mb-2 */
        display: block;
      }
      .form-input, .form-select, .form-textarea {
        width: 100%;
        padding: 0.75rem; /* p-3 */
        border: 1px solid #D1D5DB; /* border-gray-300 */
        border-radius: 0.75rem; /* rounded-xl */
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
        transition: border-color 0.2s, box-shadow 0.2s;
      }
      .form-input:focus, .form-select:focus, .form-textarea:focus {
        outline: none;
        border-color: #F97316; /* border-orange-500 */
        box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.3); /* ring-orange-500 */
      }
      /* Estilos para el Rating de Estrellas */
      .star-rating {
        display: flex;
        flex-direction: row-reverse;
        justify-content: center;
        gap: 0.25rem; /* gap-1 */
      }
      .star-rating input[type="radio"] {
        display: none;
      }
      .star-rating label {
        font-size: 2.25rem; /* text-4xl */
        color: #D1D5DB; /* text-gray-300 */
        cursor: pointer;
        transition: color 0.2s;
      }
      .star-rating input[type="radio"]:checked ~ label {
        color: #FBBF24; /* text-amber-400 */
      }
      .star-rating label:hover,
      .star-rating label:hover ~ label {
        color: #FBBF24; /* text-amber-400 */
      }
      /* Mensaje de éxito/error (no usamos alert) */
      .form-message {
        display: none;
        padding: 1rem;
        margin-top: 1rem;
        border-radius: 0.75rem;
        font-weight: 600;
      }
      .form-message.success {
        display: block;
        background-color: #D1FAE5; /* bg-green-100 */
        color: #065F46; /* text-green-800 */
      }
      .form-message.error {
        display: block;
        background-color: #FEE2E2; /* bg-red-100 */
        color: #991B1B; /* text-red-800 */
      }

      /* Estilos para el carrusel y su paginación */
      .swiper-container {
        width: 100%;
        padding-bottom: 40px !important; /* Espacio para los puntos de paginación */
        touch-action: pan-y; /* Previene el 'swipe' de navegación del navegador en móviles */
      }
      .swiper-slide {
        box-sizing: border-box; /* Asegura que el padding no rompa el diseño */
      }
      .swiper-pagination-bullet-active {
        background-color: #F97316 !important; /* Color naranja para el punto activo */
      }
    </style>
</head>
<body class="font-sans">

    
    <!-- Contenedor Principal -->
    <div class="container mx-auto px-4 py-12 md:py-20 relative"> <!-- Añadido relative para el icono de carrito -->

        <!-- NUEVO: Icono de Carrito -->
        <div id="cart-icon" class="fixed top-4 right-4 z-40 cursor-pointer p-3 bg-white rounded-full shadow-lg hover:bg-gray-100 transition">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-orange-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
            </svg>
            <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-6 w-6 flex items-center justify-center">0</span>
        </div>

        
        <!-- Encabezado -->
        <header class="text-center mb-16 md:mb-24">
            <!-- CAMBIO: Se quita el emoji -->
            <!-- CAMBIO: Título más pequeño en móvil (text-4xl) -->
            <h1 class="text-4xl md:text-7xl font-extrabold mb-4 leading-tight text-gradient-animated animate-text-gradient-anim">
                ¡Bolis Artesanales! <br> El sabor de la alegría
            </h1>
            <p class="text-xl md:text-3xl text-yellow-100 font-medium drop-shadow-md">
                Refresca tu día con nuestros deliciosos y cremosos bolis.
            </p>
            <a href="#formulario-pedido" class="mt-8 inline-block px-8 py-3 bg-white text-orange-600 font-bold text-lg rounded-full shadow-lg hover:bg-gray-100 transform hover:scale-105 transition duration-300 ease-in-out animate-bounce-in">
              ¡Quiero uno ya!
            </a>
        </header>

        
        <!-- Sección de Productos -->
        <!-- CAMBIO: 'grid-cols-2' (para móvil), 'lg:grid-cols-3' (para desktop) -->
        <!-- CAMBIO: Reducido gap-x, gap-y y pt para la nueva cuadrícula -->
        <main class="grid grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-20 pt-20 max-w-7xl mx-auto">

            
            <!-- 1. Tamarindo con Limón -->
            <div class="card-product">
              <!-- CAMBIO: Reducido pt-16 (padding-top) -->
              <div class="bg-white rounded-3xl shadow-2xl pt-16 p-4 text-center relative h-full flex flex-col transform hover:scale-105 transition-transform duration-300 ease-in-out group">
                <!-- Logo Circular con TU IMAGEN -->
                <!-- CAMBIO: Contenedor de icono más pequeño (w-28, h-28, top -3.5rem) -->
                <div class="bg-orange-200 card-icon-container w-28 h-28 -top-[3.5rem] animate-float-light">
                  <img src="imagenes/bolis-tamarindo-con-limon.png" alt="Boli de Tamarindo con Limón" class="card-icon">
                </div>
                
                <!-- Contenido -->
                <div class="flex-grow">
                  <!-- CAMBIO: Título de sabor más pequeño (text-2xl) -->
                  <h3 class="text-2xl font-bold text-gray-800 mt-4 mb-2">Tamarindo con Limón</h3>
                  <!-- CAMBIO: Descripción más pequeña (text-sm) -->
                  <p class="text-gray-600 text-sm mb-4">
                    Ingredientes: Pulpa de tamarindo 100% natural, jugo de limón fresco y un toque de sal.
                  </p>
                </div>
                
                <!-- Precio y Botón -->
                <div class="mt-4 flex flex-col items-center">
                  <!-- CAMBIO: Precio más pequeño (text-4xl) -->
                  <span class="text-4xl font-extrabold text-orange-600 block mb-1">$12</span>
                  <span class="text-sm font-medium text-gray-500 block mb-3">133 ml</span>
                  <!-- CAMBIO: Quitado "Lo quiero", añadido selector de cantidad y botón "Agregar" -->
                  <div class="flex items-center gap-2 mt-4">
                    <input type="number" class="product-quantity w-16 text-center form-input py-2" value="1" min="1">
                    <button class="add-to-cart-btn bg-gradient-to-r from-orange-500 to-amber-500 text-white font-bold py-2 px-3 rounded-full shadow-md hover:shadow-lg transform hover:scale-105 transition duration-300 ease-in-out text-sm" data-sabor="Tamarindo con Limón" data-precio="12">
                      Agregar
                    </button>
                  </div>
                  <span class="add-to-cart-message text-green-600 h-4 mt-1 text-xs font-medium"></span>
                </div>
              </div>
            </div>

            
            <!-- 2. Mazapán -->
            <div class="card-product">
              <!-- CAMBIO: Reducido pt-16 (padding-top) -->
              <div class="bg-white rounded-3xl shadow-2xl pt-16 p-4 text-center relative h-full flex flex-col transform hover:scale-105 transition-transform duration-300 ease-in-out group">
                <!-- Logo Circular con TU IMAGEN -->
                <!-- CAMBIO: Contenedor de icono más pequeño (w-28, h-28, top -3.5rem) -->
                <div class="bg-yellow-100 card-icon-container w-28 h-28 -top-[3.5rem] animate-float-light">
                  <img src="imagenes/bolis-mazapan.png" alt="Boli de Mazapán" class="card-icon">
                </div>
                
                <!-- Contenido -->
                <div class="flex-grow">
                  <!-- CAMBIO: Título de sabor más pequeño (text-2xl) -->
                  <h3 class="text-2xl font-bold text-gray-800 mt-4 mb-2">Mazapán</h3>
                  <!-- CAMBIO: Descripción más pequeña (text-sm) -->
                  <p class="text-gray-600 text-sm mb-4">
                    Ingredientes: Mazapán de cacahuate original, leche cremosa y un toque de vainilla.
                  </p>
                </div>
                
                <!-- Precio y Botón -->
                <div class="mt-4 flex flex-col items-center">
                  <!-- CAMBIO: Precio más pequeño (text-4xl) -->
                  <span class="text-4xl font-extrabold text-orange-600 block mb-1">$12</span>
                  <span class="text-sm font-medium text-gray-500 block mb-3">133 ml</span>
                  <!-- CAMBIO: Quitado "Lo quiero", añadido selector de cantidad y botón "Agregar" -->
                  <div class="flex items-center gap-2 mt-4">
                    <input type="number" class="product-quantity w-16 text-center form-input py-2" value="1" min="1">
                    <button class="add-to-cart-btn bg-gradient-to-r from-orange-500 to-amber-500 text-white font-bold py-2 px-3 rounded-full shadow-md hover:shadow-lg transform hover:scale-105 transition duration-300 ease-in-out text-sm" data-sabor="Mazapán" data-precio="12">
                      Agregar
                    </button>
                  </div>
                  <span class="add-to-cart-message text-green-600 h-4 mt-1 text-xs font-medium"></span>
                </div>
              </div>
            </div>

            
            <!-- 3. Horchata -->
            <div class="card-product">
              <!-- CAMBIO: Reducido pt-16 (padding-top) -->
              <div class="bg-white rounded-3xl shadow-2xl pt-16 p-4 text-center relative h-full flex flex-col transform hover:scale-105 transition-transform duration-300 ease-in-out group">
                <!-- Logo Circular con TU IMAGEN -->
                <!-- CAMBIO: Contenedor de icono más pequeño (w-28, h-28, top -3.5rem) -->
                <div class="bg-stone-100 card-icon-container w-28 h-28 -top-[3.5rem] animate-float-light">
                  <img src="imagenes/bolis-horchata.jpg" alt="Boli de Horchata" class="card-icon">
                </div>
                
                <!-- Contenido -->
                <div class="flex-grow">
                  <!-- CAMBIO: Título de sabor más pequeño (text-2xl) -->
                  <h3 class="text-2xl font-bold text-gray-800 mt-4 mb-2">Horchata</h3>
                  <!-- CAMBIO: Descripción más pequeña (text-sm) -->
                  <p class="text-gray-600 text-sm mb-4">
                    Ingredientes: Agua de arroz tradicional, canela molida, leche y un toque de azúcar.
                  </p>
                </div>
                
                <!-- Precio y Botón -->
                <div class="mt-4 flex flex-col items-center">
                  <!-- CAMBIO: Precio más pequeño (text-4xl) -->
                  <span class="text-4xl font-extrabold text-orange-600 block mb-1">$12</span>
                  <span class="text-sm font-medium text-gray-500 block mb-3">133 ml</span>
                  <!-- CAMBIO: Quitado "Lo quiero", añadido selector de cantidad y botón "Agregar" -->
                  <div class="flex items-center gap-2 mt-4">
                    <input type="number" class="product-quantity w-16 text-center form-input py-2" value="1" min="1">
                    <button class="add-to-cart-btn bg-gradient-to-r from-orange-500 to-amber-500 text-white font-bold py-2 px-3 rounded-full shadow-md hover:shadow-lg transform hover:scale-105 transition duration-300 ease-in-out text-sm" data-sabor="Horchata" data-precio="12">
                      Agregar
                    </button>
                  </div>
                  <span class="add-to-cart-message text-green-600 h-4 mt-1 text-xs font-medium"></span>
                </div>
              </div>
            </div>

            
            <!-- 4. Fresas con Crema -->
            <div class="card-product">
              <!-- CAMBIO: Reducido pt-16 (padding-top) -->
              <div class="bg-white rounded-3xl shadow-2xl pt-16 p-4 text-center relative h-full flex flex-col transform hover:scale-105 transition-transform duration-300 ease-in-out group">
                <!-- Logo Circular con TU IMAGEN -->
                <!-- CAMBIO: Contenedor de icono más pequeño (w-28, h-28, top -3.5rem) -->
                <div class="bg-pink-200 card-icon-container w-28 h-28 -top-[3.5rem] animate-float-light">
                  <img src="imagenes/bolis-fresas-con-crema.png" alt="Boli de Fresas con Crema" class="card-icon">
                </div>
                
                <!-- Contenido -->
                <div class="flex-grow">
                  <!-- CAMBIO: Título de sabor más pequeño (text-2xl) -->
                  <h3 class="text-2xl font-bold text-gray-800 mt-4 mb-2">Fresas con Crema</h3>
                  <!-- CAMBIO: Descripción más pequeña (text-sm) -->
                  <p class="text-gray-600 text-sm mb-4">
                    Ingredientes: Fresas frescas de temporada, crema dulce, leche evaporada y un toque de lechera.
                  </p>
                </div>
                
                <!-- Precio y Botón -->
                <div class="mt-4 flex flex-col items-center">
                  <!-- CAMBIO: Precio más pequeño (text-4xl) -->
                  <span class="text-4xl font-extrabold text-orange-600 block mb-1">$12</span>
                  <span class="text-sm font-medium text-gray-500 block mb-3">133 ml</span>
                  <!-- CAMBIO: Quitado "Lo quiero", añadido selector de cantidad y botón "Agregar" -->
                  <div class="flex items-center gap-2 mt-4">
                    <input type="number" class="product-quantity w-16 text-center form-input py-2" value="1" min="1">
                    <button class="add-to-cart-btn bg-gradient-to-r from-orange-500 to-amber-500 text-white font-bold py-2 px-3 rounded-full shadow-md hover:shadow-lg transform hover:scale-105 transition duration-300 ease-in-out text-sm" data-sabor="Fresas con Crema" data-precio="12">
                      Agregar
                    </button>
                  </div>
                  <span class="add-to-cart-message text-green-600 h-4 mt-1 text-xs font-medium"></span>
                </div>
              </div>
            </div>

            
            <!-- 5. Oreo -->
            <div class="card-product">
              <!-- CAMBIO: Reducido pt-16 (padding-top) -->
              <div class="bg-white rounded-3xl shadow-2xl pt-16 p-4 text-center relative h-full flex flex-col transform hover:scale-105 transition-transform duration-300 ease-in-out group">
                <!-- Logo Circular con TU IMAGEN -->
                <!-- CAMBIO: Contenedor de icono más pequeño (w-28, h-28, top -3.5rem) -->
                <div class="bg-gray-700 card-icon-container w-28 h-28 -top-[3.5rem] animate-float-light">
                  <img src="imagenes/bolis-de-oreo.png" alt="Boli de Oreo" class="card-icon">
                </div>
                
                <!-- Contenido -->
                <div class="flex-grow">
                  <!-- CAMBIO: Título de sabor más pequeño (text-2xl) -->
                  <h3 class="text-2xl font-bold text-gray-800 mt-4 mb-2">Oreo</h3>
                  <!-- CAMBIO: Descripción más pequeña (text-sm) -->
                  <p class="text-gray-600 text-sm mb-4">
                    Ingredientes: Galleta Oreo triturada, leche entera, crema dulce y un toque de vainilla.
                  </a-p>
                </div>
                
                <!-- Precio y Botón -->
                <div class="mt-4 flex flex-col items-center">
                  <!-- CAMBIO: Precio más pequeño (text-4xl) -->
                  <span class="text-4xl font-extrabold text-orange-600 block mb-1">$12</span>
                  <span class="text-sm font-medium text-gray-500 block mb-3">133 ml</span>
                  <!-- CAMBIO: Quitado "Lo quiero", añadido selector de cantidad y botón "Agregar" -->
                  <div class="flex items-center gap-2 mt-4">
                    <input type="number" class="product-quantity w-16 text-center form-input py-2" value="1" min="1">
                    <button class="add-to-cart-btn bg-gradient-to-r from-orange-500 to-amber-500 text-white font-bold py-2 px-3 rounded-full shadow-md hover:shadow-lg transform hover:scale-105 transition duration-300 ease-in-out text-sm" data-sabor="Oreo" data-precio="12">
                      Agregar
                    </button>
                  </div>
                  <span class="add-to-cart-message text-green-600 h-4 mt-1 text-xs font-medium"></span>
                </div>
              </div>
            </div>
            
            <!-- CAMBIO: Añadido un item fantasma para alinear la última fila en 'lg' (3 columnas) -->
            <div class="hidden lg:block"></div>

        </main>

        
        <!-- CAMBIO: Sección Formulario de Pedido ELIMINADA -->
        <!-- <section id="formulario-pedido" ... </section> -->

        
        <!-- Sección de Reseñas (sin cambios) -->
        <section id="reseñas" class="mt-24 pt-16">
          <div class="w-full max-w-3xl mx-auto">
            <h2 class="text-4xl font-extrabold text-center text-white mb-8 drop-shadow-lg">¡Lo que dicen nuestros clientes!</h2>

            
            <!-- Carrusel de Reseñas -->
            <div class="swiper-container mySwiper mb-12">
              <div class="swiper-wrapper">
                
                
                <!-- Reseña Estática 1 -->
                <div class="swiper-slide bg-white p-6 rounded-2xl shadow-xl">
                  <div class="flex justify-between items-center mb-2">
                    <span class="font-bold text-lg text-gray-800">Laura G.</span>
                    <span class="text-amber-400 text-xl">★★★★★</span>
                  </div>
                  <p class="text-gray-600">"¡El boli de Oreo es espectacular! Súper cremoso y con muchos trocitos de galleta. 100% recomendado."</p>
                </div>
                
                
                <!-- Reseña Estática 2 -->
                <div class="swiper-slide bg-white p-6 rounded-2xl shadow-xl">
                  <div class="flex justify-between items-center mb-2">
                    <span class="font-bold text-lg text-gray-800">Miguel R.</span>
                    <span class="text-amber-400 text-xl">★★★★☆</span>
                  </div>
                  <p class="text-gray-600">"Muy rico el de Fresas con Crema, se nota que la fresa es natural. El de horchata también muy bueno. Me gustaría que tuvieran de limón."</p>
                </div>
                
                
                <!-- Reseña Estática 3 -->
                <div class="swiper-slide bg-white p-6 rounded-2xl shadow-xl">
                  <div class="flex justify-between items-center mb-2">
                    <span class="font-bold text-lg text-gray-800">Sofía M.</span>
                    <span class="text-amber-400 text-xl">★★★★★</span>
                  </div>
                  <p class="text-gray-600">"Excelente servicio, me contactaron rápido por WhatsApp y la entrega fue súper puntual en el kiosko. ¡Gracias!"</p>
                </div>

              </div>
              
              <!-- Paginación del Carrusel -->
              <div class="swiper-pagination"></div>
            </div>

            
            <!-- Formulario para dejar Reseña -->
            <div class="bg-white p-6 md:p-10 rounded-3xl shadow-2xl animate-fade-in-up" style="animation-delay: 0.9s;">
              <h3 class="text-3xl font-bold text-center text-gray-800 mb-6">¡Deja tu reseña!</h3>
              <form id="reviewForm">
                <div class="mb-4">
                  <!-- CAMBIO: Texto más claro para las estrellas -->
                  <label class="form-label text-center">¡Tu Calificación! (Elige las estrellas)</label>
                  <div class="star-rating">
                    <input type="radio" id="star5" name="rating" value="5" required><label for="star5" title="5 estrellas">★</label>
                    <input type="radio" id="star4" name="rating" value="4"><label for="star4" title="4 estrellas">★</label>
                    <input type="radio" id="star3" name="rating" value="3"><label for="star3" title="3 estrellas">★</label>
                    <input type="radio" id="star2" name="rating" value="2"><label for="star2" title="2 estrellas">★</label>
                    <!-- !!!!! CORRECCIÓN REALIZADA AQUÍ !!!!! -->
                    <input type="radio" id="star1" name="rating" value="1"><label for="star1" title="1 estrella">★</label>
                  </div>
                </div>
                <div class="mb-4">
                  <label for="review-nombre" class="form-label">Tu Nombre</label>
                  <input type="text" id="review-nombre" name="review-nombre" class="form-input" required>
                </div>
                <div class="mb-6">
                  <label for="review-comentario" class="form-label">Tu Comentario</label>
                  <textarea id="review-comentario" name="review-comentario" rows="3" class="form-textarea" required placeholder="Cuéntanos tu experiencia..."></textarea>
                </div>
                <button type="submit" id="submit-review-btn" class="w-full bg-gradient-to-r from-orange-500 to-amber-500 text-white font-bold text-lg py-4 px-6 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition duration-300 ease-in-out">
                  Enviar Reseña
                </button>
                
                <!-- Mensaje de Estado de la Reseña -->
                <div id="review-form-message" class="form-message"></div>
              </form>
            </div>
          </div>
        </section>

        
        <!-- Footer -->
        <footer class="text-center p-8 text-yellow-50 mt-16 drop-shadow-md">
            <p class="font-bold text-lg">Bolis Artesanales "La Alegría Refrescante" &copy; 2025</p>
            <p>Hechos con ❤️ y mucho sabor en México</p>
        </footer>

    </div>

    <!-- NUEVO: Modal del Carrito de Compras -->
    <div id="cart-modal" class="fixed inset-0 bg-black bg-opacity-75 z-50 hidden flex items-center justify-center p-4">
        <!-- CAMBIO: Modal más responsivo en altura y ancho -->
        <div id="cart-modal-content" class="bg-white w-full max-w-lg rounded-2xl shadow-xl flex flex-col max-h-[90vh]">
            
            <!-- Encabezado del Modal -->
            <div class="flex justify-between items-center p-5 border-b">
                <h2 class="text-3xl font-extrabold text-gray-800">Tu Carrito</h2>
                <button id="close-cart-btn" class="text-gray-400 hover:text-gray-700 text-4xl font-light">&times;</button>
            </div>
            
            <!-- CAMBIO: Contenedor de SCROLL ÚNICO -->
            <div class="overflow-y-auto">

                <!-- Contenido del Carrito (Items) -->
                <div id="cart-items-container" class="p-6 space-y-4">
                    <!-- Los items del carrito se agregarán aquí con JS -->
                    <!-- <p id="cart-empty-message" class="text-gray-500 text-center">Tu carrito está vacío.</p> -->
                </div>
                
                <!-- Total del Carrito -->
                <div class="p-6 border-t text-right">
                    <span class="text-3xl font-extrabold text-gray-800">Total: <span id="cart-total" class="text-orange-600">$0.00</span></span>
                </div>
                
                <!-- Formulario de Checkout -->
                <!-- CAMBIO: quitado 'overflow-y-auto' de aquí -->
                <form id="checkoutForm" class="p-6 space-y-4 border-t">
                    <h3 class="text-2xl font-bold text-gray-700">Completa tu Pedido</h3>
                    
                    <!-- CORRECCIÓN: Se restaura el grid de formulario que estaba corrupto -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="nombre" class="form-label">Nombre Completo</label>
                            <input type="text" id="nombre" name="nombre" class="form-input" required>
                        </div>
                        <div>
                            <label for="telefono" class="form-label">Teléfono / WhatsApp</label>
                            <input type="tel" id="telefono" name="telefono" class="form-input" required>
                        </div>
                    </div>
                    <div class="mb-2">
                        <!-- CORRECCIÓN: Arreglada la etiqueta </s-label> por </label> -->
                        <label for="lugar-entrega" class="form-label">Lugar de Entrega</label>
                        <select id="lugar-entrega" name="lugar-entrega" class="form-select" required>
                            <option value="">Selecciona un punto de entrega...</option>
                            <!-- CORRECCIÓN: Restauradas las opciones que desaparecieron -->
                            <option value="Huixquilucan Centro (Kiosko)">Huixquilucan Centro (Kiosko)</option>
                            <option value="El Mirador Magdalena Chichicaspa (Parada de autobuses)">El Mirador Magdalena Chichicaspa (Parada)</option>
                            <option value="Paraje Las Máquinas Magdalena Chichicaspa">Paraje Las Máquinas Magdalena Chichicaspa</option>
                        </select>
                        <!-- CORRECCIÓN: Restaurada la etiqueta <p> -->
                        <p class="text-sm text-gray-500 mt-2">
                            <strong>Horario de Entrega:</strong> Sábados, acordando la hora contigo.
                        </p>
                    </div>
                    <div class="mb-2">
                        <!-- CORRECCIÓN: Arreglada la etiqueta </s-label> por </label> -->
                        <label for="comentarios" class="form-label">Comentarios Adicionales</label>
                        <textarea id="comentarios" name="comentarios" rows="3" class="form-textarea" placeholder="¿Alguna indicación especial?"></textarea>
                    </div>

                    <!-- CORRECCIÓN: ¡El botón faltaba! Añadido de nuevo -->
                    <button type="submit" id="submit-order-btn" class="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold text-lg py-4 px-6 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition duration-300 ease-in-out">
                        Confirmar Pedido
                    </button>
                    <!-- CORRECCIÓN: Eliminada etiqueta </button> que sobraba -->
                    
                    <div id="cart-form-message" class="form-message"></div>
                </form>

            </div> <!-- Fin del contenedor de SCROLL ÚNICO -->

        </div>
    </div>
    
    <!-- JavaScript -->
    <script>
      // ---- URL de Google Apps Script (sin cambios) ----
      const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbx88q2qxy_szNMh4GOz0gT-Bpp7Fz6GOoMo5b2uvwKRoopMARciMQ8JsD-R-6kuldE/exec';
      // --------------------

      // PRECIO_BOLI ya no es constante, lo tomamos del botón
      // const PRECIO_BOLI = 12; 

      // NUEVO: Estado del Carrito
      let cart = [];

      document.addEventListener('DOMContentLoaded', () => {

        // --- Selectores de Reseñas (sin cambios) ---
        const reviewForm = document.getElementById('reviewForm');
        const reviewMessage = document.getElementById('review-form-message');
        const submitReviewBtn = document.getElementById('submit-review-btn');
        var swiper = new Swiper(".mySwiper", {
          slidesPerView: 1, 
          spaceBetween: 30, 
          loop: true, 
          autoplay: {
            delay: 5000, 
            disableOnInteraction: false, 
          },
          pagination: {
            el: ".swiper-pagination",
            clickable: true, 
          },
          breakpoints: {
            768: { slidesPerView: 2, spaceBetween: 20 },
            1024: { slidesPerView: 3, spaceBetween: 30 },
          },
        });

        // --- NUEVO: Selectores del Carrito ---
        const cartIcon = document.getElementById('cart-icon');
        const cartModal = document.getElementById('cart-modal');
        const cartModalContent = document.getElementById('cart-modal-content');
        const closeCartBtn = document.getElementById('close-cart-btn');
        const cartItemsContainer = document.getElementById('cart-items-container');
        const cartTotalEl = document.getElementById('cart-total');
        const cartCountEl = document.getElementById('cart-count');
        const addToCartButtons = document.querySelectorAll('.add-to-cart-btn');
        const checkoutForm = document.getElementById('checkoutForm');
        const cartFormMessage = document.getElementById('cart-form-message');

        // --- NUEVO: Función para abrir y cerrar el modal ---
        cartIcon.addEventListener('click', () => {
            updateCartUI(); // Actualiza el carrito cada vez que se abre
            cartModal.classList.remove('hidden');
        });
        
        const closeModal = () => {
            cartModal.classList.add('hidden');
        };
        closeCartBtn.addEventListener('click', closeModal);
        // Cerrar al hacer clic en el fondo oscuro
        cartModal.addEventListener('click', (e) => {
            if (e.target === cartModal) {
                closeModal();
            }
        });


        // --- NUEVO: Función principal para actualizar la UI del Carrito ---
        const updateCartUI = () => {
            // Limpiar contenedor
            cartItemsContainer.innerHTML = '';
            
            let totalGeneral = 0;
            let totalItems = 0;

            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p class="text-gray-500 text-center">Tu carrito está vacío.</p>';
            } else {
                cart.forEach(item => {
                    const subtotal = item.precio * item.cantidad;
                    totalGeneral += subtotal;
                    totalItems += item.cantidad;

                    const itemHTML = `
                        <div class="flex items-center justify-between gap-2 sm:gap-4 border-b pb-4">
                            <div class="flex-grow">
                                <h4 class="font-bold text-lg">${item.sabor}</h4>
                                <!-- CAMBIO: Input para modificar cantidad -->
                                <div class="flex items-center gap-2 mt-1">
                                    <label class="text-sm text-gray-600">Cant:</label>
                                    <input type="number" class="cart-quantity-input w-16 text-center form-input py-1 text-sm" value="${item.cantidad}" min="0" data-sabor="${item.sabor}">
                                </div>
                            </div>
                            <div class="text-right flex-shrink-0">
                                <span class="font-bold text-lg block">$${subtotal.toFixed(2)}</span>
                                <button class="remove-from-cart-btn text-red-500 text-sm hover:underline" data-sabor="${item.sabor}">Quitar</button>
                            </div>
                        </div>
                    `;
                    cartItemsContainer.innerHTML += itemHTML;
                });
            }

            // Actualizar totales
            cartTotalEl.textContent = `$${totalGeneral.toFixed(2)}`;
            cartCountEl.textContent = totalItems;
        };

        // --- NUEVO: Función para agregar al carrito ---
        const addToCart = (sabor, cantidad, precio, btn) => {
            const existingItem = cart.find(item => item.sabor === sabor);

            if (existingItem) {
                existingItem.cantidad += cantidad;
            } else {
                cart.push({ sabor, cantidad, precio });
            }

            updateCartUI();

            // Mostrar mensaje de "¡Agregado!"
            const messageEl = btn.closest('.card-product').querySelector('.add-to-cart-message');
            if(messageEl) {
                messageEl.textContent = '¡Agregado!';
                setTimeout(() => {
                    messageEl.textContent = '';
                }, 2000); // Borra el mensaje después de 2 segundos
            }
        };

        // --- NUEVO: Asignar evento a botones "Agregar" ---
        addToCartButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                const card = btn.closest('.card-product');
                const sabor = btn.dataset.sabor;
                const precio = parseFloat(btn.dataset.precio);
                const cantidadInput = card.querySelector('.product-quantity');
                const cantidad = parseInt(cantidadInput.value, 10);

                if (cantidad > 0) {
                    addToCart(sabor, cantidad, precio, btn);
                    cantidadInput.value = '1'; // Resetea la cantidad
                }
            });
        });

        // --- NUEVO: Asignar evento para quitar del carrito (delegación) ---
        cartItemsContainer.addEventListener('click', (e) => {
            if (e.target.classList.contains('remove-from-cart-btn')) {
                const sabor = e.target.dataset.sabor;
                // Filtra el carrito, quitando el item
                cart = cart.filter(item => item.sabor !== sabor);
                updateCartUI();
            }
        });

        // --- NUEVO: Asignar evento para quitar del carrito (delegación) ---
        cartItemsContainer.addEventListener('click', (e) => {
            if (e.target.classList.contains('remove-from-cart-btn')) {
                const sabor = e.target.dataset.sabor;
                // Filtra el carrito, quitando el item
                cart = cart.filter(item => item.sabor !== sabor);
                updateCartUI();
            }
        });

        <!-- CORRECCIÓN: Eliminado el bloque de código duplicado de 'cartItemsContainer.addEventListener' -->

        // --- NUEVO: Asignar evento para MODIFICAR CANTIDAD en carrito (delegación) ---
        cartItemsContainer.addEventListener('change', (e) => { // 'change' se activa al perder el foco
            if (e.target.classList.contains('cart-quantity-input')) {
                const sabor = e.target.dataset.sabor;
                const newCantidad = parseInt(e.target.value, 10);
                
                const cartItem = cart.find(item => item.sabor === sabor);
                if (!cartItem) return;

                if (newCantidad > 0) {
                    cartItem.cantidad = newCantidad;
                } else {
                    // Si es 0 o menos, quitarlo
                    cart = cart.filter(item => item.sabor !== sabor);
                }
                updateCartUI(); // Re-renderizar todo el carrito con la nueva info
            }
        });


        // --- MODIFICADO: Lógica de envío de formulario (ahora es checkoutForm) ---
        checkoutForm.addEventListener('submit', (e) => {
            e.preventDefault();

            if (cart.length === 0) {
                cartFormMessage.textContent = 'Tu carrito está vacío. Agrega productos para confirmar.';
                cartFormMessage.className = 'form-message error';
                return;
            }

            const submitBtn = checkoutForm.querySelector('#submit-order-btn');
            const btnOriginalText = submitBtn.textContent;
            submitBtn.disabled = true;
            submitBtn.textContent = 'Enviando...';
            cartFormMessage.className = 'form-message'; // Reset message

            // Convertir el carrito al formato JSON que espera el Google Script
            const pedidos = cart.map(item => ({ 
                sabor: item.sabor, 
                cantidad: item.cantidad 
            }));

            // Crear el objeto de datos
            const formData = {
              tipo: 'Pedido',
              nombre: checkoutForm.nombre.value,
              telefono: checkoutForm.telefono.value,
              pedido: JSON.stringify(pedidos),
              total: cartTotalEl.textContent, // Tomamos el total del carrito
              lugarEntrega: checkoutForm['lugar-entrega'].value,
              comentarios: checkoutForm.comentarios.value
            };
            
            // Enviar a Google Apps Script
            fetch(SCRIPT_URL, {
              method: 'POST',
              mode: 'no-cors', 
              cache: 'no-cache',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify(formData)
            })
            .then(() => {
                checkoutForm.reset();
                cart = []; // Vacía el carrito
                updateCartUI(); // Actualiza la UI (mostrará carrito vacío)
                closeModal(); // Cierra el modal
                
                // Muestra el mensaje de éxito en el formulario de reseñas (o crea uno nuevo si es necesario)
                // Usaremos el de reseñas ya que el de pedido fue eliminado
                const globalSuccessMessage = document.getElementById('review-form-message'); // Asumimos que existe
                if (globalSuccessMessage) {
                    globalSuccessMessage.textContent = '¡Pedido recibido! Te contactaremos por WhatsApp pronto.';
                    globalSuccessMessage.className = 'form-message success';
                    setTimeout(() => { globalSuccessMessage.className = 'form-message'; }, 5000);
                }

            })
            .catch(error => {
                cartFormMessage.textContent = 'Hubo un error al enviar tu pedido. Intenta de nuevo.';
                cartFormMessage.className = 'form-message error';
                console.error('Error:', error);
            })
            .finally(() => {
                submitBtn.disabled = false;
                submitBtn.textContent = btnOriginalText;
            });
        });


        // --- Lógica del Formulario de Reseñas (sin cambios) ---
        const agregarNuevaReseña = (nombre, rating, comentario) => {
          const estrellasNum = parseInt(rating, 10) || 0;
          const estrellasIconos = '★'.repeat(estrellasNum) + '☆'.repeat(5 - estrellasNum);
          const safeNombre = nombre.replace(/</g, "&lt;").replace(/>/g, "&gt;");
          const safeComentario = comentario.replace(/</g, "&lt;").replace(/>/g, "&gt;");
          const nuevaReseñaHTML = `
            <div class="swiper-slide bg-white p-6 rounded-2xl shadow-xl">
              <div class="flex justify-between items-center mb-2">
                <span class="font-bold text-lg text-gray-800">${safeNombre}</span>
                <span class="text-amber-400 text-xl">${estrellasIconos}</span>
              </div>
              <p class="text-gray-600">${safeComentario}</p>
            </div>
          `;
          if (swiper) {
            swiper.appendSlide(nuevaReseñaHTML);
            swiper.update(); 
            swiper.slideTo(swiper.slides.length - 1); 
          }
        };

        if (reviewForm) {
          reviewForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const btnOriginalText = submitReviewBtn.textContent;
            submitReviewBtn.disabled = true;
            submitReviewBtn.textContent = 'Enviando...';
            reviewMessage.className = 'form-message'; 

            const rating = reviewForm.querySelector('input[name="rating"]:checked');
            const nombre = reviewForm['review-nombre'].value;
            const comentario = reviewForm['review-comentario'].value;
            const ratingValue = rating ? rating.value : '0';

            const formData = {
              tipo: 'Reseña',
              nombre: nombre,
              rating: ratingValue,
              comentario: comentario
            };

            fetch(SCRIPT_URL, {
              method: 'POST',
              mode: 'no-cors',
              cache: 'no-cache',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify(formData)
            })
            .then(() => {
                agregarNuevaReseña(nombre, ratingValue, comentario);
                reviewForm.reset();
                reviewMessage.textContent = '¡Gracias por tu reseña!';
                reviewMessage.className = 'form-message success';
            })
            .catch(error => {
                reviewMessage.textContent = 'Hubo un error al enviar tu reseña. Intenta de nuevo.';
                reviewMessage.className = 'form-message error';
                console.error('Error:', error);
            })
            .finally(() => {
                submitReviewBtn.disabled = false;
                submitReviewBtn.textContent = btnOriginalText;
            });
          });
        }

      });
    </script>

</body>
</html>
